/*

    Warsaw Agent
    GAS Tecnologia - 2017
*/
/* Version 1.4.0.114157 */
'use strict';window.wsawie=function(){return/Trident|EDGE/ig.test(window.navigator.userAgent)&&!window.ActiveXObject};wsawie()&&document.addEventListener("DOMContentLoaded",function(){var c=document.createElement("A");c.style.position="absolute";c.style.left="-10000px";c.style.top="auto";c.style.width="1px";c.style.height="1px";c.style.overflow="hidden";c.href="javascript:QWN0aXZhdGVMb29wYmFja0V4ZW1wdA()";c.appendChild(document.createTextNode("WarsawRequest"));document.body.insertBefore(c,document.body.childNodes[0])});
window.wsawas=function(c,a){function b(b){return function(){!b.readyState||"loaded"!==b.readyState&&"complete"!==b.readyState||(b.onload=null,b.onreadystatechange=null,a())}}function g(b){return function(){b.onload=null;b.onreadystatechange=null;a()}}for(var d=document.getElementsByTagName("SCRIPT"),e=0;e<d.length;++e)if(void 0!==d[e].attributes.src&&null!==d[e].attributes.src){var f=d[e].attributes.src.value.split("/");if(-1!==f[f.length-1].indexOf("warsaw-agent.js")){f=f.slice(0,-1);f.push(c);var f=
f.join("/"),h=document.createElement("script");h.onload=g(h);h.onreadystatechange=b(h);h.setAttribute("type","text/javascript");h.setAttribute("src",f);d[e].parentNode.insertBefore(h,d[e]);return h}}};
window.wsawb64=function(){function c(){}c.prototype.q=function(a){return 26>a?a+65:52>a?a+71:62>a?a-4:62===a?43:63===a?47:65};c.prototype.v=function(a){var b=new Uint8Array(a);wsawgb()==k&&(b=a);a=2;for(var g="",d=b.byteLength,c=0,f=0;f<d;f++)if(a=f%3,0<f&&0===4*f/3%76&&(g+="\r\n"),c|=b[f]<<(16>>>a&24),2===a||1===b.byteLength-f)g+=String.fromCharCode(this.q(c>>>18&63),this.q(c>>>12&63),this.q(c>>>6&63),this.q(c&63)),c=0;return g.substr(0,g.length-2+a)+(2===a?"":1===a?"=":"==")};return c}();
var k=1;window.wsawgb=function(){var c=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),a="undefined"!==typeof InstallTrigger,b=0<Object.prototype.toString.call(window.S).indexOf("Constructor"),g=!!document.documentMode||-1<navigator.userAgent.toLowerCase().indexOf("msie");return window.chrome&&!c?2:a?3:g?k:c?4:b?5:0};
window.wsawax=function(){function c(){var a=this;this.onmessage=this.onerror=null;this.C=!0;try{this.u=new ActiveXObject("Warsaw.Object.1"),this.u.addEvent("onerror",function(b){if(null!==a.onerror)a.onerror(b)}),this.u.addEvent("onmessage",function(b){if(null!==a.onmessage)a.onmessage(b)})}catch(b){this.C=!1}}c.prototype.send=function(a){!0===this.C&&this.u.send(a)};return c}();var l=1;
window.wsawobj=function(){function c(a){var b=this;this.url=a;this.s=this.g=!1;this.a=[];this.j=Math.floor(3001*Math.random());this.error=!1;this.L=wsawgb();this.o=this.i=!1;this.N=["Install"];this.method=l;this.L==k&&this.D();this.i||(wsawie()?setTimeout(function(){b.l()},1500):this.l())}c.prototype.k=function(a){this.s=this.g=!0;this.P();if(this.onconnect)this.onconnect(a)};c.prototype.A=function(a){if(this.s){this.g=!1;var b=this;setTimeout(function(){3===b.method?b.D():b.method===l?b.l():2===
b.method&&b.m()},5E3)}else void 0!==a.target&&null!==a.target||this.h(a)};c.prototype.w=function(){if(void 0!==this.e&&null!==this.e){this.e.onmessage=null;this.e=this.e.onerror=null;for(var a=0;a<this.a.length;++a)this.a[a].B=!0}};c.prototype.D=function(){this.w();this.e=new wsawax;var a=this;this.e.onerror=function(b){a.h(b)};this.e.onmessage=function(b){a.p(b)};if(this.g=this.e.C)this.method=3,this.o=this.i=!0,this.k({target:null})};c.prototype.l=function(){this.w();if(void 0===window.WebSocket)this.m();
else{var a=this;try{if(void 0===this.b||3==this.b.readyState)this.b=new WebSocket(a.url)}catch(b){this.m();return}this.b.binaryType="arraybuffer";this.b.onopen=function(b){a.k(b)};this.b.onclose=function(b){a.A(b)};this.b.onmessage=function(b){a.p(b)};this.b.onerror=function(b){a.h(b)}}};c.prototype.m=function(){var a=this;if(void 0!==window.WEB_SOCKET_SWF_LOCATION)this.o=!0,this.b=new FlashWebSocket(a.url),this.b.onopen=function(b){a.k(b)},this.b.onclose=function(b){a.A(b)},this.b.onmessage=function(b){a.p(b)},
this.b.onerror=function(b){a.h(b)};else{this.w();window.WEB_SOCKET_SWF_LOCATION="warsaw-websocket.swf";for(var b=document.getElementsByTagName("SCRIPT"),c=0;c<b.length;++c)if(void 0!==b[c].attributes.src&&null!==b[c].attributes.src){var d=b[c].attributes.src.value.split("/");-1!==d[d.length-1].indexOf("warsaw-agent.js")&&(d=d.slice(0,-1),d.push("warsaw-websocket.swf"),d=d.join("/"),window.WEB_SOCKET_SWF_LOCATION=d)}window.WEB_SOCKET_FORCE_FLASH=!0;this.method=2;wsawas("warsaw-swfobject.js",function(){wsawas("warsaw-web_socket.js",
function(){11>swfobject.getFlashPlayerVersion().major?a.h({target:null}):(a.o=!0,a.b=new FlashWebSocket(a.url),a.b.onopen=function(b){a.k(b)},a.b.onclose=function(b){a.A(b)},a.b.onmessage=function(b){a.p(b)},a.b.onerror=function(b){a.h(b)})})})}};c.prototype.h=function(a){3===this.method&&"string"===typeof a&&-1!==a.indexOf("connect")&&(this.g=this.s=!1);if(this.s){var b=this;setTimeout(function(){3===b.method?b.D():b.method===l?b.l():2===b.method&&b.m()},5E3)}else if(this.i)this.i=this.g=!1,this.l();
else if(void 0!==a.target&&null!==a.target)this.m();else{this.error=!0;for(a=0;a<this.a.length;++a)this.a[a].onerror("Close");this.a=[]}};c.prototype.p=function(a){var b=null;try{var c="",c=this.i?JSON.parse(a):JSON.parse(a.data);for(a=0;a<this.a.length;a++)if(c.ri==this.a[a].J){b=this.a[a];this.I(a);break}if("object"==typeof c.r)b.onsuccess(JSON.stringify(c.r));else b.onsuccess(c.r)}catch(d){if(b&&b.onerror)b.onerror("Syntax error")}};c.prototype.I=function(a){for(var b=[],c=0;c<this.a.length;c++)c!=
a&&b.push(this.a[c]);this.a=b};c.prototype.M=function(a,b){var c=a,d=0;if(b&1)for(b+=1,c=new Uint8Array(b),d=c[b-1]=0;d<b-1;d++)c[d]=a[d]&255;for(var e=0,d=0;d<b;d+=2)e+=c[d]<<8|c[d+1];for(;e>>16;)e=(e&65535)+(e>>16);return~e&65535};c.prototype.P=function(){for(var a=0;a<this.a.length;a++)if(this.a[a].B&&(this.a[a].B=!1,this.g&&!this.error))if(this.o)void 0===this.e||null===this.e?this.b.send("WS!"+(new wsawb64).v(this.a[a].data)):this.e.send("WS!"+(new wsawb64).v(this.a[a].data));else try{this.b.send(this.a[a].data)}catch(b){if("NS_ERROR_CANNOT_CONVERT_DATA"===
b.name)this.b.send("WS!"+(new wsawb64).v(this.a[a].data)),this.o=!0;else throw b;}};c.prototype.O=function(a){for(var b=0;b<this.a.length;b++)if(this.a[b].J==a){this.a[b].onerror("Close");this.I(b);break}};c.prototype.K=function(a){for(var b=0;b<a.length;++b){var c=a.charCodeAt(b);if(256<c)if(c="&#"+c.toString()+";",wsawgb()==k){var d=escape(a.substr(b,1));a=escape(a);a=a.replace(d,c);a=unescape(a)}else a=a.replace(a[b],c)}c=a.length+5;b=new Uint8Array(c);b[0]=65;b[1]=1;b[2]=0;b[3]=0;for(var d=b[4]=
0,e=a.length;d<e;++d)b[d+5]=a.charCodeAt(d);a=this.M(b,c);b[2]=(65280&a)>>8;b[3]=a&255;return b};c.prototype.execute=function(a){if(-1<window.location.hash.indexOf("###")||!a||!a.d)return!1;a.d=JSON.parse(a.d);a.onerror||(a.onerror=function(){});a.onsuccess||(a.onsuccess=function(){});var b=3E4;a.t&&(b=a.t);try{this.j+=1;this.onconnect=a.onconnect;a.d.ri=this.j.toString();a.d.c=a.params;var c=this.K(JSON.stringify(a.d,function(a,b){return"number"!==typeof b||isFinite(b)?b:String(b)}));this.a.push({B:!0,
data:c,J:this.j.toString(),onsuccess:a.onsuccess,onerror:a.onerror});this.error?this.h({target:null}):this.g&&this.k({target:null});if(0<b){var d=JSON.parse(a.d.d).n,e=this.j.toString(),f=this;0>this.N.indexOf(d)&&setTimeout(function(){f.O(e)},b)}}catch(h){return!1}return!0};return c}();wsawgb()==k&&(wsawas("warsaw-json.js",function(){}),wsawas("warsaw-typedarray.js",function(){}));wsawie()||(window.wsaw=new wsawobj("wss://127.0.0.1:30900"));
window.warsawExec=function(c){if(!wsii()){if(c.onerror)c.onerror("Close");return!1}!wsawie()||void 0!==window.wsaw&&null!==window.wsaw||(window.wsaw=new wsawobj("wss://127.0.0.1:30900"));return window.wsaw.execute(c)};var wsii=function(){var c=function(){function a(){this.f=["monospace","sans-serif","serif"];this.R="wwwmmmmmmmmmmlli";this.Q="72px";this.body=document.getElementsByTagName("body")[0];this.span=document.createElement("span");this.span.style.fontSize=this.Q;this.span.innerHTML=this.R;this.G={};this.F={};for(var a in this.f)this.span.style.fontFamily=this.f[a],this.body.appendChild(this.span),this.G[this.f[a]]=this.span.offsetWidth,this.F[this.f[a]]=this.span.offsetHeight,this.body.removeChild(this.span)}
a.prototype.H=function(a){var c=!1,d;for(d in this.f)if(this.span.style.fontFamily=a+","+this.f[d],this.body.appendChild(this.span),c=this.span.offsetWidth!=this.G[this.f[d]]||this.span.offsetHeight!=this.F[this.f[d]],this.body.removeChild(this.span),c)break;return c};return a}();return function(){var a=new c,b=a.H("dbldwrsw");b||(b=a.H("Warsaw"));return b}}();
